<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baliku</title>
    <link rel="icon" type="image/x-icon" href="https://lh3.googleusercontent.com/d/19TNRds6ofL8omolE0436xCM_kjSw7MwN">
    <style>
        /* --- GAYA UMUM & RESET --- */
        * { box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0; padding: 0;
            background-color: #e0f7fa;
            /* Pastikan file ini ada di folder */
            background-image: url('bg_utama.jpg'); 
            background-size: cover;
            background-position: center;
            height: 100vh;
            width: 100vw;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
            user-select: none;
        }

        /* --- CONTAINER UTAMA (RESPONSIF) --- */
        #app-container {
            width: 95%; max-width: 1000px;
            height: 90vh;
            background: rgba(255, 255, 255, 0.96);
            border: 4px solid #00acc1;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
            display: flex; flex-direction: column;
        }

        /* --- SLIDE SYSTEM --- */
        .slide {
            display: none;
            width: 100%; height: 100%;
            padding: 20px;
            flex-direction: column;
            align-items: center; justify-content: center; /* Default centering */
            text-align: center;
            animation: fadeIn 0.5s ease-in;
            overflow-y: auto; /* Scroll jika konten panjang */
        }
        
        /* Tambahan agar scroll aman (tidak terpotong atasnya) saat konten tinggi */
        .slide.active {
            display: flex; 
        }
        
        /* Khusus slide yang isinya panjang agar tidak terpotong saat di-center */
        .scroll-safe {
            justify-content: flex-start; /* Mulai dari atas, bukan tengah */
            padding-top: 40px; /* Beri jarak dari atas */
            padding-bottom: 40px;
        }

        @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

        /* --- TYPOGRAPHY --- */
        h1 { color: #d84315; margin: 5px 0; font-size: clamp(1.5rem, 4vw, 2.5rem); }
        h2 { color: #00838f; margin: 5px 0 15px 0; font-size: clamp(1.2rem, 3vw, 1.8rem); }
        p, li { font-size: clamp(14px, 2vw, 18px); color: #333; }

        /* --- TOMBOL --- */
        .btn-nav {
            background: #ff9800; color: white; border: none;
            padding: 10px 25px; font-size: clamp(14px, 2vw, 18px);
            border-radius: 25px; cursor: pointer; margin: 5px;
            font-weight: bold; box-shadow: 0 3px #e65100; transition: 0.2s;
        }
        .btn-nav:hover { transform: scale(1.05); }
        .btn-nav:active { transform: scale(0.95); }
        .btn-back { background: #546e7a; box-shadow: 0 3px #37474f; }
        
        /* Input Nama */
        #input-nama {
            padding: 10px; font-size: 18px; border-radius: 10px;
            border: 2px solid #00acc1; margin: 15px 0; width: 80%; max-width: 300px;
            text-align: center;
        }

        /* --- MAP CONTAINER --- */
        .map-container {
            width: 80%; height: 40vh;
            border: 2px dashed #bbb; margin: 10px auto;
            display: flex; justify-content: center; align-items: center;
            background: #fff; border-radius: 10px;
        }
        .map-img { max-width: 100%; max-height: 100%; object-fit: contain; }

        /* --- EXPLORER (SLIDE 3) --- */
        .explorer-layout {
            display: flex; width: 100%; height: 60vh; gap: 15px; text-align: left;
        }
        .explorer-menu {
            width: 30%; display: flex; flex-direction: column; gap: 5px;
            overflow-y: auto; padding-right: 5px;
        }
        .explorer-content {
            width: 70%; border: 2px solid #00acc1; border-radius: 10px;
            padding: 10px; background: #fff;
            display: flex; flex-direction: column; align-items: center; overflow-y: auto;
        }
        .btn-region {
            background: #4dd0e1; border: none; padding: 10px; border-radius: 5px;
            cursor: pointer; text-align: left; font-size: clamp(12px, 1.5vw, 16px);
            transition: 0.2s; color: #004d40; font-weight: bold;
        }
        .btn-region:hover, .btn-region.active-btn { background: #0097a7; color: white; }
        
        #region-image-container {
            width: 140px; height: 140px; margin: 10px;
            display: flex; justify-content: center; align-items: center;
            border: 1px solid #eee; border-radius: 10px; padding: 5px;
        }
        #region-image-container img {
            max-width: 100%; max-height: 100%; object-fit: contain;
            animation: popIn 0.3s;
        }

        /* --- GAME MEMORY (SLIDE 4) --- */
        #slide-4 {
            justify-content: space-between; /* Tombol tetap di bawah */
            padding-bottom: 15px;
        }

        .game-board {
            display: grid; 
            gap: 6px; /* Jarak antar kartu dirapatkan */
            margin: 5px auto; 
            width: 98%; 
            max-width: 800px;
            
            /* Logic Flex agar menyesuaikan tinggi layar */
            flex: 1; 
            min-height: 0; 
            /* overflow-y: auto;  Kita matikan scroll jika memungkinkan */
            padding: 2px;
            align-content: center; /* Kartu di tengah vertikal */

            /* Desktop: 6 kolom x 3 baris = 18 kartu (Sangat Pas) */
            grid-template-columns: repeat(6, 1fr); 
        }

        .card {
            background-color: #fff; border: 2px solid #00838f; aspect-ratio: 1;
            border-radius: 6px; display: flex; justify-content: center; align-items: center;
            cursor: pointer; position: relative; transition: transform 0.2s;
            /* Batasi tinggi kartu agar tidak mendorong tombol keluar */
            max-height: 14vh; 
        }
        .card.flipped { background-color: #ffe0b2; cursor: default; }
        .card.matched { background-color: #c8e6c9; border-color: #2e7d32; }
        
        /* Font kartu lebih kecil dan responsif */
        .card-content { 
            font-size: clamp(9px, 1.2vw, 14px); 
            font-weight: bold; 
            text-align: center; 
            display: none; 
            padding: 2px; 
            word-break: break-word; 
            line-height: 1.1;
        }
        
        .card.flipped .card-content, .card.matched .card-content { display: block; }
        .card::before { content: "?"; font-size: clamp(16px, 3vw, 24px); color: #00acc1; position: absolute; }
        .card.flipped::before, .card.matched::before { display: none; }

        /* --- EVALUASI QUIZ (SLIDE 5) --- */
        .quiz-container { width: 90%; max-width: 700px; background: #fff; padding: 20px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .question-text { font-size: 20px; font-weight: bold; margin-bottom: 20px; color: #d84315; }
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .btn-option {
            background: #e0f7fa; border: 2px solid #00acc1; padding: 15px;
            border-radius: 10px; cursor: pointer; font-size: 16px; transition: 0.2s;
        }
        .btn-option:hover { background: #b2ebf2; }
        .btn-option.correct { background: #a5d6a7; border-color: #2e7d32; }
        .btn-option.wrong { background: #ef9a9a; border-color: #c62828; }

        /* --- SERTIFIKAT (SLIDE 6) --- */
        /* PERBAIKAN: Menggunakan ukuran relatif & clamp agar fleksibel */
        .certificate {
            width: 95%; 
            max-width: 700px; 
            padding: 20px;
            background: #fff8e1; 
            border: 8px double #d84315;
            position: relative; 
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            margin: auto; /* Penting agar tidak terpotong saat scroll */
            flex-shrink: 0; /* Agar tidak gepeng */
        }
        
        .cert-title { 
            font-family: 'Georgia', serif; 
            font-size: clamp(18px, 4vw, 36px); /* Font menyesuaikan layar */
            color: #d84315; 
            margin-bottom: 15px; 
            border-bottom: 2px solid #d84315; 
            display: inline-block; 
        }
        .cert-name { 
            font-size: clamp(20px, 5vw, 32px); /* Font menyesuaikan layar */
            font-weight: bold; 
            color: #000; 
            margin: 15px 0; 
            text-transform: uppercase; 
            word-wrap: break-word; /* Mencegah nama panjang keluar */
        }
        .cert-score { 
            font-size: clamp(30px, 8vw, 48px); /* Font menyesuaikan layar */
            font-weight: bold; 
            color: #00838f; 
            margin: 10px 0; 
        }
        .cert-msg { 
            font-style: italic; 
            color: #555; 
            font-size: clamp(14px, 3vw, 18px);
        }

        /* --- RESPONSIVE MOBILE --- */
        @media (max-width: 768px) {
            .explorer-layout { flex-direction: column-reverse; height: 60vh; }
            .explorer-menu { width: 100%; height: 35%; display: grid; grid-template-columns: 1fr 1fr; }
            .explorer-content { width: 100%; height: 65%; }
            #region-image-container { width: 100px; height: 100px; }
            
            /* Game Board Mobile: Gunakan 5 kolom agar muat 4 baris (hemat tempat) */
            .game-board { grid-template-columns: repeat(5, 1fr); gap: 4px; } 
            
            .options-grid { grid-template-columns: 1fr; } /* Quiz jadi 1 kolom di HP */
            .certificate { padding: 15px; border-width: 5px; }
        }

        /* Kontrol Musik */
        #music-control {
            position: absolute; top: 10px; right: 10px;
            background: #fff; border-radius: 50%; width: 40px; height: 40px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-size: 20px; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* Tombol Pengembang (Baru) */
        #dev-btn {
            position: absolute; top: 10px; left: 10px;
            background: #fff; border-radius: 50%; width: 40px; height: 40px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-size: 20px; z-index: 100; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }
        #dev-btn:hover { transform: scale(1.1); }

    </style>
</head>
<body>

<!-- Audio Background -->
<audio id="bg-music" loop>
    <source src="musik1.mp3" type="audio/mpeg">
</audio>

<div id="app-container">
    
    <!-- Tombol Musik (Kanan Atas) -->
    <div id="music-control" onclick="toggleMusic()">üîá</div>

    <!-- Tombol Pengembang (Kiri Atas) - BARU -->
    <div id="dev-btn" onclick="pindahSlide('dev')" title="Profil Pengembang">üë®‚Äçüíª</div>

    <!-- SLIDE 1: INTRO & INPUT NAMA -->
    <div id="slide-1" class="slide active">
        <img src="ikon_garuda.png" alt="Garuda" width="100" style="margin-bottom:10px;">
        <h1>Pendidikan Pancasila</h1>
        <h2>Mengenal Wilayahku: Bali & NKRI</h2>
        
        <div style="background: white; padding: 20px; border-radius: 15px; margin-top:10px; width: 90%; max-width:400px;">
            <p style="margin-bottom: 0px;">Tulis namamu dulu ya!<br>Ada sertifikat belajar untuk kamu.</p>
            <input type="text" id="input-nama" placeholder="Ketik namamu di sini...">
            <br>
            <button class="btn-nav" onclick="mulaiAplikasi()">Masuk Kelas ‚ñ∂</button>
        </div>
    </div>

    <!-- SLIDE 2: PETA INDONESIA -->
    <div id="slide-2" class="slide">
        <h2>Posisi Bali dalam NKRI</h2>
        <p>Lihatlah peta Indonesia. Bali adalah bagian penting dari NKRI.</p>
        <div class="map-container">
            <img src="peta_indonesia.png" alt="Peta Indonesia" class="map-img">
        </div>
        <p>Provinsi Bali terletak di antara Pulau Jawa dan Pulau Lombok.</p>
        <div style="margin-top:auto;">
            <button class="btn-nav" onclick="pindahSlide(3)">Jelajah Bali ‚ñ∂</button>
        </div>
    </div>

    <!-- SLIDE 3: EKSPLORASI BALI -->
    <div id="slide-3" class="slide">
        <h2>Peta Wilayah Provinsi Bali</h2>
        <div class="explorer-layout">
            <div class="explorer-menu">
                <button class="btn-region" onclick="tampilInfo('Denpasar', this)">Kota Denpasar</button>
                <button class="btn-region" onclick="tampilInfo('Badung', this)">Kab. Badung</button>
                <button class="btn-region" onclick="tampilInfo('Gianyar', this)">Kab. Gianyar</button>
                <button class="btn-region" onclick="tampilInfo('Tabanan', this)">Kab. Tabanan</button>
                <button class="btn-region" onclick="tampilInfo('Jembrana', this)">Kab. Jembrana</button>
                <button class="btn-region" onclick="tampilInfo('Buleleng', this)">Kab. Buleleng</button>
                <button class="btn-region" onclick="tampilInfo('Bangli', this)">Kab. Bangli</button>
                <button class="btn-region" onclick="tampilInfo('Klungkung', this)">Kab. Klungkung</button>
                <button class="btn-region" onclick="tampilInfo('Karangasem', this)">Kab. Karangasem</button>
            </div>

            <div class="explorer-content">
                <img src="peta_bali.png" alt="Peta Bali" style="height:30%; width:auto; margin-bottom:10px; object-fit:contain;">
                <hr style="width:100%; border:1px dashed #ccc;">
                
                <div style="display:flex; width:100%; align-items:center; flex-direction: row; justify-content: space-around;">
                    <div id="region-image-container">
                        <img id="dynamic-img" src="" style="display:none;" alt="Ikon Daerah"> 
                        <span id="placeholder-text" style="color:#aaa; font-size:12px; text-align:center;">Klik tombol daerah</span>
                    </div>
                    <div style="width:60%; text-align:left;">
                        <h3 id="info-nama" style="margin:0; color:#00838f;">...</h3>
                        <p id="info-desc" style="font-size:clamp(12px, 2vw, 15px);">Pilih nama daerah untuk melihat detail.</p>
                    </div>
                </div>
            </div>
        </div>
        <div style="margin-top:auto; padding-top:10px;">
            <button class="btn-nav btn-back" onclick="pindahSlide(2)">‚óÄ Peta NKRI</button>
            <button class="btn-nav" onclick="setupGame(); pindahSlide(4)">Main Game ‚ñ∂</button>
        </div>
    </div>

    <!-- SLIDE 4: GAME MEMORY -->
    <div id="slide-4" class="slide">
        <h2>Game: Ibukotanya mana???</h2>
        <p style="margin:0;">Cocokkan <strong>Nama Daerah</strong> dengan <strong>Ibukotanya</strong>!</p>
        <div id="game-board" class="game-board"></div>
        <p id="game-status" style="font-weight:bold; color:#d84315; margin-top:5px; height:20px;"></p>
        <div style="margin-top:auto;">
            <button class="btn-nav btn-back" onclick="pindahSlide(3)">‚óÄ Materi</button>
            <!-- Tombol Lanjut Evaluasi disembunyikan di awal (display: none) -->
            <button id="btn-evaluasi" class="btn-nav" onclick="startQuiz(); pindahSlide(5)" style="display:none;">Lanjut Evaluasi ‚ñ∂</button>
        </div>
    </div>

    <!-- SLIDE 5: EVALUASI (20 SOAL) -->
    <div id="slide-5" class="slide">
        <h2>Evaluasi Pengetahuan</h2>
        <div class="quiz-container">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <span id="q-number" style="font-weight:bold; color:#00838f;">Soal 1/20</span>
                <span id="q-score" style="color:#d84315;">Skor: 0</span>
            </div>
            <p id="q-text" class="question-text">Pertanyaan akan muncul di sini...</p>
            <div id="options-container" class="options-grid">
                <!-- Tombol Opsi digenerate JS -->
            </div>
        </div>
    </div>

    <!-- SLIDE 6: SERTIFIKAT -->
    <!-- PERBAIKAN: Menambahkan class scroll-safe agar aman saat tinggi -->
    <div id="slide-6" class="slide scroll-safe">
        <div class="certificate">
            <div class="cert-title">SERTIFIKAT HASIL BELAJAR</div>
            <p>Diberikan kepada siswa hebat:</p>
            <div class="cert-name" id="final-name">NAMA SISWA</div>
            <p>Telah menyelesaikan materi "Mengenal Wilayahku: Bali"</p>
            <p>Dengan Nilai Akhir:</p>
            <div class="cert-score" id="final-score">100</div>
            <p class="cert-msg" id="final-msg">Luar Biasa!</p>
        </div>
        <div style="margin-top:20px;">
            <button class="btn-nav" onclick="location.reload()">Ulangi dari Awal ‚Ü∫</button>
        </div>
    </div>

    <!-- SLIDE DEV: PROFIL PENGEMBANG (BARU) -->
    <div id="slide-dev" class="slide">
        <h2>Profil Pengembang</h2>
        <!-- Kontainer fleksibel untuk gambar agar responsif -->
        <div style="flex: 1; width: 100%; display: flex; align-items: center; justify-content: center; padding: 10px;">
            <img src="pengembang.png" alt="Foto Pengembang" 
                 style="max-width: 100%; max-height: 50vh; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); border: 2px solid #00acc1;">
        </div>
        
        <div style="margin-top: 20px;">
            <p>"Bukan programmer profesional, cuma guru yang lagi cosplay jadi anak IT biar murid nggak bosen.</p>
            <button class="btn-nav btn-back" onclick="pindahSlide(1)">‚óÄ Kembali ke Menu</button>
        </div>
    </div>

</div>

<script>
    // --- VARIABEL GLOBAL ---
    let namaSiswa = "Siswa";
    let skorKuis = 0;
    let currentQIndex = 0;

    // --- DATA WILAYAH BALI ---
    const dataBali = {
        'Denpasar': { ibukota: 'Denpasar', desc: 'Ibukota Provinsi. Pusat pemerintahan & ekonomi.' },
        'Badung': { ibukota: 'Mangupura', desc: 'Pusat pariwisata (Kuta, Nusa Dua) & Bandara.' },
        'Gianyar': { ibukota: 'Gianyar', desc: 'Pusat seni budaya (Ubud), Istana Tampaksiring.' },
        'Tabanan': { ibukota: 'Tabanan', desc: 'Lumbung beras Bali, Pura Tanah Lot, Bedugul.' },
        'Jembrana': { ibukota: 'Negara', desc: 'Pintu gerbang barat (Gilimanuk), Tradisi Makepung.' },
        'Buleleng': { ibukota: 'Singaraja', desc: 'Wilayah terluas di utara, Pantai Lovina.' },
        'Bangli': { ibukota: 'Bangli', desc: 'Satu-satunya yang tidak punya laut. Kintamani.' },
        'Klungkung': { ibukota: 'Semarapura', desc: 'Pusat Kerajaan Kertagosa, termasuk Nusa Penida.' },
        'Karangasem': { ibukota: 'Amlapura', desc: 'Ujung timur Bali, Pura Besakih, Gunung Agung.' }
    };

    // --- AUDIO & INTRO ---
    const bgMusic = document.getElementById('bg-music');
    let isMusicPlaying = false;

    function mulaiAplikasi() {
        const input = document.getElementById('input-nama').value;
        if(input.trim() === "") {
            alert("Silakan isi namamu dulu ya!");
            return;
        }
        namaSiswa = input;
        
        // Play Audio
        bgMusic.volume = 0.3;
        bgMusic.play().then(() => {
            isMusicPlaying = true;
            document.getElementById('music-control').innerText = "üîä";
        }).catch(() => { console.log("Audio autoplay blocked"); });

        pindahSlide(2);
    }

    function toggleMusic() {
        if (isMusicPlaying) {
            bgMusic.pause(); document.getElementById('music-control').innerText = "üîá";
        } else {
            bgMusic.play(); document.getElementById('music-control').innerText = "üîä";
        }
        isMusicPlaying = !isMusicPlaying;
    }

    function pindahSlide(no) {
        document.querySelectorAll('.slide').forEach(el => el.classList.remove('active'));
        // Support pindah ke slide string ('dev') atau angka
        const targetId = (typeof no === 'string') ? 'slide-' + no : 'slide-' + no;
        document.getElementById(targetId).classList.add('active');
    }

    // --- EXPLORER LOGIC (REVISI: AUTO FALLBACK & STABLE LOADING) ---
    function tampilInfo(key, btnElement) {
        document.querySelectorAll('.btn-region').forEach(b => b.classList.remove('active-btn'));
        btnElement.classList.add('active-btn');

        const data = dataBali[key];
        document.getElementById('info-nama').innerText = (key === 'Denpasar') ? 'Kota Denpasar' : 'Kab. ' + key;
        document.getElementById('info-desc').innerText = data.desc;

        const imgEl = document.getElementById('dynamic-img');
        const placeholder = document.getElementById('placeholder-text');

        // Reset Tampilan
        imgEl.style.display = 'none';
        placeholder.style.display = 'block';
        placeholder.innerText = "Mencari gambar...";

        // Nama file dasar (contoh: ikondenpasar)
        const baseName = 'ikon' + key.toLowerCase();

        // 1. Definisikan handler Error & Success SEBELUM set src
        imgEl.onload = function() {
            this.style.display = 'block';
            placeholder.style.display = 'none';
        };

        imgEl.onerror = function() {
            // Jika PNG gagal, cek apakah kita sudah mencoba JPG?
            if (this.src.endsWith('.png')) {
                console.log("PNG gagal, mencoba JPG...");
                this.src = baseName + '.jpg'; // Coba JPG
            } else {
                // Jika JPG juga gagal, menyerah
                this.style.display = 'none';
                placeholder.style.display = 'block';
                placeholder.innerText = "Gagal memuat:\n" + baseName + ".png / .jpg";
            }
        };

        // 2. Mulai proses dengan mencoba PNG dulu
        imgEl.src = baseName + '.png';
    }

    // --- GAME MEMORY ---
    let kartuTerbuka = [], kartuCocok = 0;
    function setupGame() {
        const board = document.getElementById('game-board');
        board.innerHTML = '';
        kartuTerbuka = []; kartuCocok = 0;
        document.getElementById('game-status').innerText = "";
        
        // --- LOGIKA BARU: Sembunyikan tombol evaluasi saat game dimulai ---
        const btnEval = document.getElementById('btn-evaluasi');
        if(btnEval) btnEval.style.display = 'none';
        
        let deck = [];
        Object.keys(dataBali).forEach(kab => {
            deck.push({ text: (kab === 'Denpasar' ? 'Kota ' : 'Kab. ') + kab, pairId: kab });
            deck.push({ text: dataBali[kab].ibukota, pairId: kab });
        });
        deck.sort(() => 0.5 - Math.random());

        deck.forEach((item) => {
            const card = document.createElement('div');
            card.className = 'card';
            card.dataset.pairId = item.pairId;
            card.innerHTML = `<div class="card-content">${item.text}</div>`;
            card.onclick = () => balikKartu(card);
            board.appendChild(card);
        });
    }

    function balikKartu(card) {
        if (card.classList.contains('flipped') || card.classList.contains('matched') || kartuTerbuka.length >= 2) return;
        card.classList.add('flipped');
        kartuTerbuka.push(card);
        if (kartuTerbuka.length === 2) cekKecocokan();
    }

    function cekKecocokan() {
        const [c1, c2] = kartuTerbuka;
        if (c1.dataset.pairId === c2.dataset.pairId) {
            c1.classList.add('matched'); c2.classList.add('matched');
            kartuCocok++;
            if (kartuCocok === 9) {
                document.getElementById('game-status').innerText = "HEBAT! Semua Benar!";
                // --- LOGIKA BARU: Munculkan tombol evaluasi saat MENANG ---
                document.getElementById('btn-evaluasi').style.display = 'inline-block';
            }
        } else {
            setTimeout(() => { c1.classList.remove('flipped'); c2.classList.remove('flipped'); }, 800);
        }
        kartuTerbuka = [];
    }

    // --- EVALUASI 20 SOAL ---
    const soalKuis = [
        { q: "Apa nama ibukota Provinsi Bali?", opt: ["Gianyar", "Denpasar", "Singaraja", "Badung"], ans: 1 },
        { q: "Provinsi Bali adalah bagian dari negara...", opt: ["Malaysia", "Singapura", "NKRI", "Australia"], ans: 2 },
        { q: "Kabupaten yang terkenal dengan Bandara Ngurah Rai adalah...", opt: ["Badung", "Denpasar", "Tabanan", "Gianyar"], ans: 0 },
        { q: "Siapakah pemimpin daerah tingkat Provinsi?", opt: ["Bupati", "Presiden", "Walikota", "Gubernur"], ans: 3 },
        { q: "Julukan pulau Bali adalah...", opt: ["Pulau Emas", "Pulau Dewata", "Pulau Intan", "Pulau Rempah"], ans: 1 },
        { q: "Kabupaten yang dikenal sebagai lumbung beras Bali adalah...", opt: ["Klungkung", "Bangli", "Tabanan", "Jembrana"], ans: 2 },
        { q: "Kabupaten terluas di Bali adalah...", opt: ["Buleleng", "Karangasem", "Badung", "Gianyar"], ans: 0 },
        { q: "Satu-satunya kabupaten di Bali yang tidak memiliki pantai adalah...", opt: ["Gianyar", "Bangli", "Badung", "Tabanan"], ans: 1 },
        { q: "Pelabuhan Gilimanuk terletak di kabupaten...", opt: ["Buleleng", "Jembrana", "Tabanan", "Badung"], ans: 1 },
        { q: "Ibukota Kabupaten Gianyar adalah...", opt: ["Ubud", "Sukawati", "Gianyar", "Tampaksiring"], ans: 2 },
        { q: "Gunung Agung yang megah terletak di kabupaten...", opt: ["Bangli", "Karangasem", "Buleleng", "Klungkung"], ans: 1 },
        { q: "Pulau Nusa Penida termasuk wilayah kabupaten...", opt: ["Klungkung", "Karangasem", "Badung", "Denpasar"], ans: 0 },
        { q: "Batas sebelah selatan pulau Bali adalah...", opt: ["Laut Jawa", "Selat Bali", "Samudera Hindia", "Selat Lombok"], ans: 2 },
        { q: "Ibukota Kabupaten Buleleng adalah...", opt: ["Singaraja", "Seririt", "Lovina", "Sukasada"], ans: 0 },
        { q: "Tradisi Makepung (balap kerbau) berasal dari...", opt: ["Gianyar", "Badung", "Jembrana", "Bangli"], ans: 2 },
        { q: "Berapa jumlah Kabupaten dan Kota di Provinsi Bali?", opt: ["7 Kab 1 Kota", "8 Kab 1 Kota", "9 Kab 1 Kota", "6 Kab 2 Kota"], ans: 1 },
        { q: "Ibukota Kabupaten Klungkung adalah...", opt: ["Klungkung Kota", "Semarapura", "Nusa Penida", "Kamasan"], ans: 1 },
        { q: "Pura Besakih terletak di kaki Gunung...", opt: ["Batur", "Agung", "Abang", "Batukaru"], ans: 1 },
        { q: "Amlapura adalah ibukota dari kabupaten...", opt: ["Karangasem", "Klungkung", "Bangli", "Buleleng"], ans: 0 },
        { q: "Lagu daerah Bali yang terkenal adalah...", opt: ["Gundul Pacul", "Mejangeran", "Ampar Pisang", "Manuk Dadali"], ans: 1 }
    ];

    function startQuiz() {
        skorKuis = 0;
        currentQIndex = 0;
        renderQuestion();
    }

    function renderQuestion() {
        if (currentQIndex >= soalKuis.length) {
            tampilkanSertifikat();
            return;
        }
        
        const q = soalKuis[currentQIndex];
        document.getElementById('q-number').innerText = `Soal ${currentQIndex + 1}/${soalKuis.length}`;
        document.getElementById('q-score').innerText = `Skor: ${skorKuis}`;
        document.getElementById('q-text').innerText = q.q;
        
        const container = document.getElementById('options-container');
        container.innerHTML = '';
        
        q.opt.forEach((opt, idx) => {
            const btn = document.createElement('button');
            btn.className = 'btn-option';
            btn.innerText = opt;
            btn.onclick = () => cekJawaban(idx, btn);
            container.appendChild(btn);
        });
    }

    function cekJawaban(pilihanUser, btnEl) {
        // Cegah klik ganda
        const allBtn = document.querySelectorAll('.btn-option');
        allBtn.forEach(b => b.disabled = true);

        const jawabanBenar = soalKuis[currentQIndex].ans;
        
        if (pilihanUser === jawabanBenar) {
            btnEl.classList.add('correct');
            skorKuis += 5; // 20 soal x 5 = 100
        } else {
            btnEl.classList.add('wrong');
            // Tunjukkan jawaban yang benar
            allBtn[jawabanBenar].classList.add('correct');
        }

        setTimeout(() => {
            currentQIndex++;
            renderQuestion();
        }, 1000);
    }

    function tampilkanSertifikat() {
        pindahSlide(6);
        document.getElementById('final-name').innerText = namaSiswa;
        document.getElementById('final-score').innerText = skorKuis;
        
        const msgEl = document.getElementById('final-msg');
        if(skorKuis >= 80) msgEl.innerText = "Luar Biasa! Kamu sangat menguasai materi.";
        else if(skorKuis >= 60) msgEl.innerText = "Bagus! Terus tingkatkan belajarmu.";
        else msgEl.innerText = "Tetap Semangat! Ayo pelajari materi lagi.";
    }

</script>

</body>

</html>

